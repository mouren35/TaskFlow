# ğŸ“‘ æ¥å£æ–‡æ¡£ï¼ˆAPI Specï¼‰

## 1. è®¤è¯ / ç”¨æˆ·

> æœ¬åº”ç”¨ä¸åšç™»å½•æ³¨å†Œï¼Œç”¨æˆ·æ•°æ®é»˜è®¤åŒ¿åå­˜å‚¨ï¼ˆå¯æ‰©å±•ä¸º deviceId / localId ä½œä¸ºç”¨æˆ·æ ‡è¯†ï¼‰

---

## 2. æ—¶é—´å—ï¼ˆTimeBlocksï¼‰

### 2.1 åˆ›å»ºæ—¶é—´å—

`POST /time-blocks`

```json
{
  "title": "ä¸Šåˆå­¦ä¹ ",
  "date": "2025-08-21",
  "endTime": "10:30",
  "repeat": { "type": "weekly", "days": [1, 3, 5] }
}
```

**å“åº”**

```json
{
  "id": "tb123",
  "title": "ä¸Šåˆå­¦ä¹ ",
  "startTime": "08:00",
  "endTime": "10:30",
  "repeat": { "type": "weekly", "days": [1, 3, 5] },
  "createdAt": "2025-08-21T08:00:00Z"
}
```

### 2.2 è·å–æŸå¤©çš„æ—¶é—´å—åˆ—è¡¨

`GET /time-blocks?date=2025-08-21`

### 2.3 ä¿®æ”¹æ—¶é—´å—

`PUT /time-blocks/:id`

### 2.4 åˆ é™¤æ—¶é—´å—

`DELETE /time-blocks/:id`

---

## 3. ä»»åŠ¡ï¼ˆTasksï¼‰

### 3.1 åˆ›å»ºä»»åŠ¡

`POST /tasks`

```json
{
  "blockId": "tb123",
  "title": "å†™éœ€æ±‚æ–‡æ¡£",
  "category": "work",
  "estimatedTime": 25,
  "repeat": { "type": "daily", "interval": 1 },
  "executionCount": 1
}
```

**å“åº”**

```json
{
  "id": "task456",
  "title": "å†™éœ€æ±‚æ–‡æ¡£",
  "status": "pending",
  "estimatedTime": 25,
  "createdAt": "2025-08-21T08:10:00Z"
}
```

### 3.2 è·å–æ—¶é—´å—ä¸‹ä»»åŠ¡åˆ—è¡¨

`GET /time-blocks/:id/tasks`

### 3.3 ä¿®æ”¹ä»»åŠ¡

`PUT /tasks/:id`

### 3.4 åˆ é™¤ä»»åŠ¡

`DELETE /tasks/:id`

### 3.5 å¼€å§‹è®¡æ—¶

`POST /tasks/:id/start`

å“åº”ï¼šè¿”å›ä»»åŠ¡çŠ¶æ€ï¼ˆinProgressï¼‰+ è®¡æ—¶å¼€å§‹æ—¶é—´

### 3.6 æš‚åœè®¡æ—¶

`POST /tasks/:id/pause`

### 3.7 å®Œæˆä»»åŠ¡

`POST /tasks/:id/complete`

```json
{
  "actualTime": 22,
  "completedAt": "2025-08-21T09:00:00Z"
}
```

---

## 4. æ€è€ƒï¼ˆTreeView / Thoughtsï¼‰

### 4.1 åˆ›å»ºæ€è€ƒèŠ‚ç‚¹

`POST /thoughts`

```json
{
  "title": "å­¦ä¹ è®¡åˆ’",
  "parentId": null,
  "category": "mind"
}
```

### 4.2 è·å–æ ‘ç»“æ„

`GET /thoughts`

### 4.3 ä¿®æ”¹æ€è€ƒèŠ‚ç‚¹

`PUT /thoughts/:id`

### 4.4 åˆ é™¤æ€è€ƒèŠ‚ç‚¹

`DELETE /thoughts/:id`

### 4.5 èŠ‚ç‚¹ä½œä¸ºä»»åŠ¡ â†’ å¤ç”¨ä»»åŠ¡æ¥å£

æ”¯æŒ `POST /thoughts/:id/start`ï¼ˆå¼€å§‹è®¡æ—¶ï¼‰ã€`/complete`ï¼ˆå®Œæˆï¼‰

---

## 5. å®‰æ’ï¼ˆæ—¥å†å®‰æ’ï¼‰

### 5.1 è·å–æŸæœˆä»»åŠ¡

`GET /schedule?month=2025-08`

è¿”å›è¯¥æœˆæ¯å¤©çš„ä»»åŠ¡ï¼ˆå·²å®Œæˆ / æœªå®Œæˆï¼‰

---

## 6. å¾…å¤„ç†äº‹é¡¹

### 6.1 è·å–å¾…å¤„ç†äº‹é¡¹

`GET /pending-tasks`
è¿”å›æ‰€æœ‰æœªå®Œæˆä»»åŠ¡ï¼ˆæŒ‰æ—¶é—´æ’åºï¼‰

---

## 7. æœç´¢

### 7.1 æœç´¢ä»»åŠ¡/æ€è€ƒ

`GET /search?q=å­¦ä¹ `
è¿”å›æ ‡é¢˜ / å¤‡æ³¨ä¸­åŒ…å«å…³é”®è¯çš„ä»»åŠ¡æˆ–æ€è€ƒ

---

## 8. ç”¨æˆ·æ•°æ® / è®¾ç½®

### 8.1 è·å–ç”¨æˆ·ç»Ÿè®¡

`GET /user/stats`

```json
{
  "completedTasks": 123,
  "totalTime": 452,
  "joinDate": "2025-08-01"
}
```

### 8.2 è·å–è®¾ç½®

`GET /user/settings`

### 8.3 ä¿®æ”¹è®¾ç½®

`PUT /user/settings`

```json
{
  "theme": "dark",
  "defaultCategory": "work",
  "defaultDuration": 25,
  "soundEnabled": true
}
```

---

## 9. æé†’ï¼ˆRemindersï¼‰

### 9.1 è®¾ç½®æé†’

`POST /tasks/:id/reminder`

```json
{
  "date": "2025-08-21",
  "time": "08:30"
}
```

### 9.2 åˆ é™¤æé†’

`DELETE /tasks/:id/reminder`

---

## 10. å“åº”è§„èŒƒ

- æˆåŠŸï¼š`{ "success": true, "data": { ... } }`
- å¤±è´¥ï¼š`{ "success": false, "errorCode": "TASK_NOT_FOUND", "message": "ä»»åŠ¡ä¸å­˜åœ¨" }`
