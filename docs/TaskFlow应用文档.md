好的 ✅ 我来帮你把这份应用需求整理成一份清晰、有层级的文档结构。下面是经过排版和分层后的需求文档，你可以直接作为 **App 产品需求文档（PRD）** 使用：

---

# 移动端应用需求文档

## 1. 项目概述

- **开发者**：独立开发者
- **目标**：用较少代码快速上线，保证流畅动画和较快的开发效率
- **技术选型**：
  - Flutter
  - MVVM 架构
  - 遵守SOLID原则
  - 灵活运用各种设计模式

- **设计风格**：扁平化设计
- **用户范围**：仅服务中国用户，不做国际化

---

## 2. 功能模块概览

- **用户系统**
  - 登录 / 注册（用户名 + 密码）
  - 忘记密码
  - 云端数据存储

- **底部导航栏（四个 Tab）**
  1. 计划
  2. 安排
  3. 思考
  4. 我的

---

## 3. 计划页面（首页）

### 3.1 顶部区域

- 搜索框（搜索所有任务）
- 更多按钮 → 弹出菜单：
  - 新建时间块
  - 待处理事项

### 3.2 周选择器

- 显示当前周，点击某一天定位
- 默认高亮当前日期

### 3.3 时间块

- **定义**：每天的时间段，含开始/截止时间
- **规则**：
  - 开始时间 = 上一个时间块的截止时间（若无则为零点）
  - 截止时间可为空

- **创建时必填**：标题
- **可选项**：
  - 截止时间
  - 重复频率（日/周）
  - 生效日期

- **展示**：
  - 按时间顺序显示
  - 标题 = 名称 + 所有任务预计时间总和
  - 可折叠/展开任务

### 3.4 时间块下的任务

- 新建方式：
  - 点击时间块右侧添加按钮
  - 弹窗标题：“新建待办事项”

- 弹窗内容：
  - 输入框（任务标题，可为空）
  - 更多选项（列表形式）
    - 分类（未分类/人际/心智/健康/工作/兴趣）
    - 预计时长（默认 25 分钟）
    - 是否重复（不重复/每日/每周/每月）
    - 当天执行次数（默认 1）

- **习惯修改提示**：修改习惯时弹出提示，是否应用到未来所有习惯
- **特殊逻辑**：
  - 无标题也可创建任务（标题为“未定义”）
  - 支持计时功能（开始即进入计时界面）

### 3.5 任务卡片

- 布局：左侧分类图标，右侧上下结构（标题 + 预计时间）
- 交互：
  - 右滑 → 完成并停止计时
  - 左滑 → 开始计时（自动停止其他任务）

- 正在计时：
  - 底部 FAB 变为计时器（显示时间 + 菜单）
  - 菜单项：新建任务 / 当前任务详情页
  - 显示进度条（已用时间 / 总时间）

### 3.6 浮动按钮（FAB）

- 默认添加任务
- 新建任务逻辑同上
- 新建任务 → 默认放在最后一个时间块

### 3.7 时间轴

- 展示所有完成任务
- 样式：
  - 左侧完成 icon（颜色依分类）
  - 右侧卡片：
    - 左上角：开始时间
    - 标题
    - 右下角：实际用时 + 完成时间
    - 下方：备注信息

---

## 4. 安排页面

- 显示整月日历
- 每日下方显示任务（带分类颜色）
- 点击任务 → 进入任务详情页

---

## 5. 任务详情 / 计时界面

### 5.1 顶部栏

- 左上角：返回按钮
- 右上角：删除任务

### 5.2 基本信息

- 任务图标、任务名称
- 预计时间（点击可修改，最大 60 分钟）
- 任务分类
- 已完成任务 → 预计时间置灰

### 5.3 进度区

- 横向进度条（仅计时时显示）
- 显示已用时间 / 总时间

### 5.4 操作区

- 未完成任务：
  - 计时器声音
  - 开始/暂停/继续
  - 完成（完成后回到首页，弹出提示）

- 已完成任务：
  - 完成状态
  - 完成日期、时间、实际用时

### 5.5 提醒与日期

- 日期选择器（安排任务到某天）
- 提醒设置（设置提醒时间）
- 已完成任务 → 置灰不可用

### 5.6 备注区

- 底部富文本输入框（实时保存）

---

## 6. 思考页面

- TreeView 树形结构展示任务
- 列表项内容：
  - 圆点（颜色根据分类）
  - 标题（可直接修改）
  - 展开/收起按钮（有子项时显示）

- 交互：
  - 回车 → 新建同级项
  - 右滑 → 缩进（成为子项）
  - 左滑 → 取消缩进
  - 点击圆点 → 进入详情页

- 支持无限嵌套

---

## 7. 我的页面

### 7.1 用户信息

- 头像
- 已完成任务数
- 总计时时长（小时）
- 加入天数

### 7.2 设置列表

- 主题（深色/浅色/跟随系统）
- 音效开关（默认开）
- 默认分类（默认未分类）
- 默认计时时长（默认 25 分钟）
- 通知开关（默认开）
- 计时到时提醒（默认开）
- 屏幕常亮（默认关）
- 版本号（点击查看更新）
- 问题反馈（复制邮箱）
- 用户协议 / 隐私政策

---

## 8. 待处理事项页面

- 展示当天之前未完成任务
- 按列表形式展示
- 按创建时间分组

---

## 9. 搜索页面

- 输入关键词后搜索
- 结果列表（按时间倒序）
- 每项显示：标题 + 备注
- 已完成任务显示完成时间

---

## 10. 数据与状态

- 应用启动时从后台获取数据
- 首页加载状态：
  - 加载中 → 显示加载动画
  - 加载失败 → 显示网络错误页

- 网络恢复时自动重新加载

---

这样整理后，你的需求文档层级清晰，模块划分明确，便于后续开发和设计。

要不要我再帮你画一个 **导航结构图/页面流程图**，把各页面之间的跳转关系也梳理出来？
