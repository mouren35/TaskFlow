# TaskFlow 应用文档

## 应用概述
- **设计风格**：类似于 Google App 的设计风格。
- **底部导航栏**：显示四个 tab，分别是“计划”、“安排”、“思考”、“我的”。应用打开后默认进入“计划”页面作为首页。

## 计划页面
### 顶部元素
- **搜索框**：位于顶部，支持搜索所有创建过的任务。
- **更多操作按钮**：位于搜索框右侧，点击弹出菜单，包含以下选项：
  - 新建时间块。
  - 待处理事项（点击进入待处理事项界面）。

### 中间元素
- **日期选择器**：横向滑动显示一周日期。点击某一天定位到该天，当前日期默认高亮。

### 时间块
- **定义**：时间块对应每天的时间段。
  - 开始时间：基于上一个时间块的截止时间；若无上一个时间块，则从当天零点开始。
  - 截止时间：用户设置。
- **创建时间块**：
  - 输入标题。
  - 选择截止时间。
  - 设置重复频率：按日、按周。
  - 指定起始日期（从哪天开始生效）。
- **显示**：创建后，按时间排序在首页显示。
- **标题**：包含时间块名称 + 当前时间块下所有任务的预计时间总和。
- **交互**：
  - 点击时间块：折叠/展开其下任务。
  - 右侧添加按钮：添加任务到该时间块（弹出“新建待办事项”弹窗）。

### 任务添加弹窗（“新建待办事项”）
- **顶部**：标题“新建待办事项”。
- **中间**：输入框，用于输入任务标题。输入框右侧有“更多”按钮。
- **底部按钮**（从左到右）：
  - 开始计时按钮：点击进入计时界面开始计时（无标题时默认为“未定义”）。
  - 取消按钮：关闭弹窗。
  - 确认按钮：创建任务到对应时间块。
- **更多选项**（点击“更多”按钮展开，以列表形式呈现，每项左右结构：左标题，右值）：
  - 分类：人际（红色）、心智（蓝色）、健康（绿色）、工作（紫色）、兴趣（黄色）。
  - 预估时长。
  - 是否重复：不重复、每日、每周、每月。
    - 每日：选择每 XX 日。
    - 每周：选择每周哪几天。
    - 每月：选择每月哪几天。
  - 当天执行次数。
- **修改习惯**：修改后弹出吐司提示“是否应用到未来所有习惯”。

### 时间块下任务卡片
- **布局**：多个任务卡片。
  - 左侧：任务分类图标。
  - 右侧：上下结构布局，显示卡片标题 + 预计时间。
- **交互**：
  - 右滑：直接完成计时。
  - 左滑：直接开始计时（右下角 FAB 变为计时器，显示计时时间）。
  - 点击卡片：弹出选项，包括“新建任务”和“进入当前任务详情页”。
- **计时状态**：计时中显示横向进度条，左侧为已用时间（e.g., 04:30），右侧为总时间（e.g., 25:00）。

### 浮动按钮 (FAB)
- **位置**：右下角。
- **功能**：点击添加任务（逻辑同任务添加弹窗），默认添加到最后一个时间块。

### 页面底部：时间轴
- **显示**：展示所有完成的任务，按时间顺序。
- **每项布局**（左右结构）：
  - 最左侧：完成 icon（颜色根据任务分类）。
  - 右侧：卡片样式。
    - 左上角：任务开始时间。
    - 开始时间下面：标题。
    - 右下角：横向排列任务实际执行时间 + 任务完成时间。
    - 中间：任务备注相关信息。

## 安排界面
- **显示**：一个月的日历。
- **内容**：每个日期下显示安排在当天的任务（任务有对应颜色）。
- **交互**：点击任务进入任务详情页。

## 任务计时界面 / 任务详情界面
### 顶部栏
- **左上角**：返回按钮。
- **右上角**：删除当前任务按钮。
- **内容**：显示任务图标、任务名称（e.g., “写需求”）、预计时间（e.g., 25 分钟；计时中不显示；已完成置灰）、任务分类。
- **交互**：点击预计时间弹出时间选择器（最多 60 分钟），确认修改，取消不修改。

### 进度区
- **显示**：横向进度条，左侧已用时间（e.g., 04:30），右侧总时间（e.g., 25:00）。
- **条件**：仅在任务计时中显示。

### 操作区
- **未完成任务**：居中排列三个圆形按钮：
  - 计时器声音。
  - 开始/继续/暂停。
  - 完成（点击后返回首页，弹出吐司“该任务已完成”）。
- **已完成任务**：显示完成状态、完成日期、完成时间、实际用时。

### 提醒与日期
- **内容**：日期选择（e.g., “8月19日”） + 提醒设置按钮。
- **交互**：
  - 点击日期：弹出日期选择器，将任务安排到某天。
  - 点击提醒：设置任务在该天的具体时间提醒。
- **条件**：已完成时置灰不可点击。

### 备注区
- **内容**：最底部输入框，提示“请输入笔记内容...”。
- **功能**：富文本编辑器，输入内容实时保存。

## 思考界面
- **显示**：树状视图 (TreeView) 形式。
- **每项布局**：
  - 左侧：圆点（颜色根据分类）。
  - 中间：标题。
  - 最右侧：展开/收起 icon（默认收起；有子项时显示）。
- **子项**：缩进形式展示，可无限嵌套。
- **交互**：
  - 右滑列表项：缩进，成为上一个列表项的子项。
  - 点击标题：直接修改标题；在标题处回车创建新的同级列表项。
  - 点击圆点：进入该列表项页面，展示子列表。
- **功能**：列表项可视为任务，支持开始计时、完成计时、添加备注等（与任务相同）。

## 我的界面
- **分为上下两部分**：
  - **上部：用户信息**（上下结构）：
    - 上：头像。
    - 下：水平排列三项信息：
      - 从使用应用开始已完成的任务数量。
      - 总计时长（以小时为单位）。
      - 加入天数。
  - **下部：设置列表**（每项左右布局：左设置名称，右设置项）：
    - 主题：深色、浅色、跟随系统。
    - 是否开启音效。
    - 默认分类。
    - 默认计时时长。
    - 是否开启通知。
    - 计时到时提醒。
    - 是否保持屏幕常亮。
    - 版本号。
    - 问题反馈。
    - 用户协议。
    - 隐私政策。

## 待处理事项界面
- **进入方式**：从计划页面的更多操作菜单点击“待处理事项”。
- **显示**：列表形式展示所有未完成的任务。

## 搜索界面
- **进入方式**：在搜索框输入文本，点击回车。
- **显示**：搜索结果按列表展示，按时间倒序排列。
- **每项内容**：标题 + 备注；已完成任务前面显示完成时间。
