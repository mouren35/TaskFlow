# 应用整体概述

## 开发目标与约束

- **开发者类型**：独立开发者。
- **开发原则**：
  - 使用较少代码快速上线小型移动端应用（Android/iOS）。
  - 确保应用有流畅的动画。
  - 选择的技术栈应支持快速开发。
- **技术栈**：
  - 框架/平台：Meteor。
  - 前端：React、TypeScript (TS)。
  - UI组件：Material UI。
  - 数据库：MongoDB（数据全部本地存储，无登录注册）。
  - 架构：MVVM。
- **设计风格**：
  - 类似Google App。
  - 所有元素无阴影。
- **用户与功能限制**：
  - 只服务中国用户，无国际化支持。
  - 无登录注册功能，所有数据本地存储。
- **导航结构**：
  - 底部导航栏，包含四个Tab：
    - 计划（默认首页）。
    - 安排。
    - 思考。
    - 我的。

# 页面与功能详情

## 计划页面（首页）

- **入口**：应用打开后默认进入。
- **顶部区域**：
  - 搜索框：用于搜索所有创建过的任务。
  - 右侧更多操作按钮：点击弹出菜单，选项包括：
    - 新建时间块。
    - 待处理事项（点击进入待处理事项界面）。
- **中间区域**：
  - 日期选择器：横向滑动显示一周日期。
    - 点击某一天定位到该天。
    - 当前日期默认高亮。
- **主要内容：时间块**：
  - **时间块定义**：
    - 对应每天的时间段。
    - 开始时间：基于上一个时间块的截止时间；若无上一个，则为当天零点。
    - 截止时间：用户可选，默认为空。
    - 创建时间块时：
      - 必须输入标题。
      - 可选：截止时间、重复频率（按日/周/月）、生效起始日期（默认今天）。
      - 默认：不重复，只显示在今天。
    - 显示逻辑：首页按时间排序显示时间块。
  - **时间块标题**：
    - 包含时间块名称 + 当前时间块下所有任务的预计时间总和。
  - **操作**：
    - 点击时间块：折叠/展开其下任务。
    - 右侧添加按钮：点击在当前时间块添加任务（弹出弹窗）。
- **添加任务弹窗**：
  - 标题："新建待办事项"。
  - 中间：输入框（任务标题），右侧更多按钮。
  - 底部按钮：
    - 最左侧：开始计时（可无标题，标题默认为"未定义"；进入计时界面）。
    - 右侧：取消（关闭弹窗）、确认（创建任务到对应时间块）。
  - **更多选项**（点击输入框右侧更多按钮展开，以列表形式呈现，每项左右结构：左标题、右值）：
    - 分类：未分类（灰色，默认）、人际（红色）、心智（蓝色）、健康（绿色）、工作（紫色）、兴趣（黄色）。
    - 预估时长：默认25分钟。
    - 是否重复（习惯）：不重复（默认）、每日（可选每xx日）、每周（可选周几）、每月（可选每月几天）。
    - 当天执行次数：默认1次。
  - **习惯修改**：修改后弹出吐司提示"是否应用到未来所有习惯"。
  - **无输入创建**：允许空输入创建任务。
- **任务卡片**（每个时间块下多个）：
  - 布局：
    - 左侧：任务分类图标。
    - 右侧：标题（上）、预计时间（下）。
  - **滑动操作**：
    - 右滑：直接完成并停止计时。
    - 左滑：直接开始计时（若有正在计时任务A，则停止A，开始B）。
  - **计时状态**：
    - 开始计时：右下角FAB变为计时器，显示计时时间。
    - 点击计时器：弹出选项（新建任务、进入当前任务详情页）。
    - 计时中：显示横向进度条，左侧已用时间（如04:30），右侧总时间（如25:00）。
- **右下角浮动按钮 (FAB)**：
  - 点击：添加任务（逻辑同添加任务弹窗）。
  - 默认：任务添加到最后一个时间块。
- **底部区域：时间轴**：
  - 展示所有完成的任务。
  - 每项布局：左右结构。
    - 最左侧：完成图标（颜色根据任务分类）。
    - 右侧：卡片样式。
      - 左上角：任务开始时间。
      - 开始时间下面：标题。
      - 右下角：实际执行时间 + 完成时间（横向排列）。
      - 标题下面：任务备注信息。

## 安排界面

- **主要内容**：
  - 显示一个月的日历。
  - 每个日期下：显示安排在当天的任务（任务有对应颜色）。
- **交互**：
  - 点击任务：进入任务详情页。

## 任务计时/详情界面

- **顶部栏**：
  - 左上角：返回按钮。
  - 右上角：删除当前任务按钮。
- **内容区**（按钮下面）：
  - 任务图标。
  - 任务名称（如"写需求"）。
  - 预计时间（如25分钟；点击弹出时间选择器修改，最多60分钟；取消不修改；已完成任务置灰；正在计时不显示）。
  - 任务分类。
- **进度区**：
  - 横向进度条：左侧已用时间（如04:30），右侧总时间（如25:00）。
  - 仅在任务计时中显示。
- **操作区**：
  - **未完成任务**：
    - 居中排列三个圆形按钮：
      - 计时器声音。
      - 开始/继续/暂停。
      - 完成（点击返回首页，弹出吐司"该任务已完成"）。
  - **已完成任务**：
    - 显示完成状态、完成日期、完成时间、实际用时。
- **提醒与日期区**：
  - 日期选择（如"8月19日"）：点击弹出日期选择器，将任务安排到某天。
  - 提醒设置按钮：设置任务在该天的具体时间提醒。
  - 已完成任务：按钮置灰，不可点击。
- **备注区**（最底部）：
  - 输入框：提示"请输入笔记内容..."。
  - 类型：富文本编辑器，输入实时保存。

## 思考界面

- **展示形式**：Treeview（树状视图）。
- **列表项结构**：
  - 每个项：任务（包含所有属性和功能）。
    - 左侧：圆点（颜色根据分类）。
    - 中间：标题（点击直接修改；回车创建同级新项）。
    - 最右侧：展开/收起图标（默认收起；包含子项时显示）。
  - 子项：缩进形式展示，可无限嵌套。
- **交互**：
  - 右滑列表项：缩进（成为上个项的子项）。
  - 左滑：取消缩进。
  - 点击圆点：进入子列表页面（展示当前项的子列表）。

## 我的界面

- **分为上下两部分**。
- **上部：用户信息**：
  - 上：头像。
  - 下：水平排列三项：
    - 从使用应用开始已完成的任务数。
    - 总计时长（以小时为单位）。
    - 加入天数。
- **下部：设置列表**（每项左右布局：左设置名称，右设置项）：
  - 主题：深色、浅色、跟随系统（默认跟随系统；点击弹出弹窗选择）。
  - 是否开启音效：默认开启（开关组件）。
  - 默认分类：默认未分类（点击弹出弹窗选择）。
  - 默认计时时长：默认25分钟（点击弹出时间选择器）。
  - 是否开启通知：默认开启（开关组件）。
  - 计时到时提醒：默认开启（开关组件）。
  - 是否保持屏幕常亮：默认不开启（开关组件）。
  - 版本号：点击查看更新信息。
  - 问题反馈：点击复制邮箱。
  - 用户协议：点击展示用户协议。
  - 隐私政策：点击展示隐私政策。

## 待处理事项界面

- **入口**：从计划页面更多菜单点击进入。
- **展示**：
  - 当天之前所有未完成的任务。
  - 列表形式，按创建时间分组。

## 搜索界面

- **入口**：计划页面搜索框输入文本，回车触发。
- **展示**：
  - 结果列表，按时间倒序排列。
  - 每项：标题 + 备注。
  - 已完成任务：前面显示完成时间。
